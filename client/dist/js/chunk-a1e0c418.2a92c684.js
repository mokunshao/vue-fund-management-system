(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1e0c418"],{"2f88":function(e,t,a){},dfd6:function(e,t,a){"use strict";var n=a("2f88"),i=a.n(n);i.a},f29b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"search_data",staticStyle:{margin:"10px 0 0 10px"},attrs:{inline:!0,model:e.search_data}},[a("el-form-item",{attrs:{label:"时间筛选:"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.search_data.startTime,callback:function(t){e.$set(e.search_data,"startTime",t)},expression:"search_data.startTime"}}),e._v("--\n      "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.search_data.endTime,callback:function(t){e.$set(e.search_data,"endTime",t)},expression:"search_data.endTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.onScreening()}}},[e._v("筛选")])],1),a("el-form-item",{staticClass:"btnRight"},["manager"==e.userInfo.identity?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document-add"},on:{click:function(t){return e.onAddMoney()}}},[e._v("添加")]):e._e()],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date.split("T")[0]))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"收支类型",align:"center"}}),a("el-table-column",{attrs:{prop:"description",label:"收支描述",align:"center"}}),a("el-table-column",{attrs:{prop:"income",label:"收入",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#00d053"}},[e._v("+ "+e._s(t.row.income))])]}}])}),a("el-table-column",{attrs:{prop:"expense",label:"支出",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#f56767"}},[e._v("- "+e._s(t.row.expense))])]}}])}),a("el-table-column",{attrs:{prop:"cash",label:"账户现金",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#4db3ff"}},[e._v(e._s(t.row.cash))])]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),"manager"==e.userInfo.identity?a("el-table-column",{attrs:{prop:"operation",align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.onEditMoney(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.onDeleteMoney(t.row)}}},[e._v("删除")])]}}],null,!1,3583432579)}):e._e()],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{"page-sizes":e.pagination.page_sizes,"page-size":e.pagination.page_size,layout:e.pagination.layout,total:e.pagination.total,"current-page":e.pagination.page_index},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page_index",t)},"update:current-page":function(t){return e.$set(e.pagination,"page_index",t)},"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),a("Dialog",{attrs:{dialog:e.dialog,form:e.form},on:{update:e.getProfile}})],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.form_rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"收支类型:"}},[a("el-select",{attrs:{placeholder:"收支类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.format_type_list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{prop:"description",label:"收支描述:"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("el-form-item",{attrs:{prop:"income",label:"收入:"}},[a("el-input",{model:{value:e.form.income,callback:function(t){e.$set(e.form,"income",e._n(t))},expression:"form.income"}})],1),a("el-form-item",{attrs:{prop:"expense",label:"支出:"}},[a("el-input",{model:{value:e.form.expense,callback:function(t){e.$set(e.form,"expense",e._n(t))},expression:"form.expense"}})],1),a("el-form-item",{attrs:{prop:"cash",label:"账户现金:"}},[a("el-input",{model:{value:e.form.cash,callback:function(t){e.$set(e.form,"cash",e._n(t))},expression:"form.cash"}})],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("el-form-item",{staticClass:"text_right"},[a("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("提交")])],1)],1)],1)},o=[],l={name:"Dialog",props:{dialog:Object,form:Object},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a="add"===e.dialog.action?"add":"edit/".concat(e.form.id);e.$axios.post("/api/profile/".concat(a),e.form).then(function(t){e.$message({message:"保存成功！",type:"success"}),e.dialog.show=!1,e.$emit("update")})}})}},data:function(){return{format_type_list:["提现","提现手续费","充值","优惠券","充值礼券","转账"],form_rules:{description:[{required:!0,message:"收支描述不能为空！",trigger:"blur"}],income:[{required:!0,message:"收入不能为空而且是数字！",type:"number",trigger:"blur"}],expense:[{required:!0,message:"支出不能为空而且是数字！",type:"number",trigger:"blur"}],cash:[{required:!0,message:"账户不能为空而且是数字！",type:"number",trigger:"blur"}]}}}},s=l,c=a("2877"),p=Object(c["a"])(s,r,o,!1,null,null,null),u=p.exports,m={computed:{userInfo:function(){return this.$store.getters.userInfo}},components:{Dialog:u},name:"FundList",methods:{onScreening:function(){if(this.search_data.startTime&&this.search_data.endTime){var e=this.search_data.startTime.getTime(),t=this.search_data.endTime.getTime();console.log(e,t),this.allTableData=this.filterTableData.filter(function(a){var n=new Date(a.date),i=n.getTime();return i>=e&&i<=t}),this.setPagination()}else this.$message({type:"warning",message:"请选择时间区间"})},handleSizeChange:function(e){this.pagination.page_size=e,this.pagination.page_index=1,this.tableData=this.allTableData.filter(function(t,a){return a<e})},handleCurrentChange:function(e){var t=this,a=this.pagination.page_size*(e-1),n=this.allTableData.filter(function(e,t){return t>=a});this.tableData=n.filter(function(e,a){return a<t.pagination.page_size})},onAddMoney:function(){this.dialog={show:!0,title:"添加资金信息",action:"add"},this.form={type:"",description:"",income:"",expense:"",cash:"",remark:"",id:""}},onEditMoney:function(e){this.dialog={show:!0,title:"修改资金信息",action:"edit"},this.form={type:e.type,description:e.description,income:e.income,expense:e.expense,cash:e.cash,remark:e.remark,id:e._id}},onDeleteMoney:function(e){var t=this;this.$axios.delete("/api/profile/delete/".concat(e._id)).then(function(e){t.$message("删除成功"),t.getProfile()})},getProfile:function(){var e=this;this.$axios.get("/api/profile").then(function(t){e.filterTableData=t.data,e.allTableData=t.data,e.setPagination()})},setPagination:function(){var e=this;this.pagination.total=this.allTableData.length,this.pagination.page_index=1,this.pagination.page_size=5,this.tableData=this.allTableData.filter(function(t,a){return a<e.pagination.page_size})}},data:function(){return{filterTableData:{},search_data:{startTime:"",endTime:""},pagination:{page_index:1,total:0,page_size:5,page_sizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},tableData:[],allTableData:[],dialog:{show:!1,title:"",action:""},form:{type:"",description:"",income:"",expense:"",cash:"",remark:"",id:""}}},created:function(){this.getProfile()}},d=m,f=(a("dfd6"),Object(c["a"])(d,n,i,!1,null,"2b8b7652",null));t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-a1e0c418.2a92c684.js.map